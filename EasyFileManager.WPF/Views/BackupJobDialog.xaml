<Window x:Class="EasyFileManager.WPF.Views.BackupJobDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:vm="clr-namespace:EasyFileManager.WPF.ViewModels"
        xmlns:core="clr-namespace:EasyFileManager.Core.Models;assembly=EasyFileManager.Core"
        Title="Backup Job Configuration" 
        Height="700" 
        Width="900"
        WindowStartupLocation="CenterOwner"
        WindowStyle="None"
        ResizeMode="NoResize"
        Background="{DynamicResource MaterialDesignPaper}"
        FontFamily="{DynamicResource MaterialDesignFont}">

    <Border BorderBrush="{DynamicResource PrimaryHueMidBrush}"
            BorderThickness="2"
            CornerRadius="4">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <materialDesign:ColorZone Grid.Row="0"
                                      Mode="PrimaryMid"
                                      Padding="16">
                <DockPanel>
                    <materialDesign:PackIcon Kind="BackupRestore" 
                                             Foreground="{DynamicResource MaterialDesignBody}"
                                             Width="28" 
                                             Height="28"
                                             VerticalAlignment="Center"
                                             DockPanel.Dock="Left"
                                             Margin="0,0,12,0"/>
                    <TextBlock Text="Backup Job Configuration"
                               Foreground="{DynamicResource MaterialDesignBody}"
                               Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                               VerticalAlignment="Center"/>
                </DockPanel>
            </materialDesign:ColorZone>

            <!-- Content -->
            <ScrollViewer Grid.Row="1" 
                          VerticalScrollBarVisibility="Auto"
                          Padding="24,16">
                <StackPanel Margin="30">
                    <!-- Basic Info -->
                    <TextBlock Text="Basic Information"
                               Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                               Foreground="{DynamicResource MaterialDesignBody}"
                               Margin="0,0,0,16"/>

                    <TextBox x:Name="NameTextBox"
                             materialDesign:HintAssist.Hint="Job Name *"
                             Style="{StaticResource MaterialDesignOutlinedTextBox}"
                             Foreground="{DynamicResource MaterialDesignBody}"
                             Margin="0,0,0,16"/>

                    <TextBox x:Name="DescriptionTextBox"
                             materialDesign:HintAssist.Hint="Description"
                             Style="{StaticResource MaterialDesignOutlinedTextBox}"
                             Foreground="{DynamicResource MaterialDesignBody}"
                             TextWrapping="Wrap"
                             AcceptsReturn="True"
                             MinLines="2"
                             MaxLines="4"
                             Margin="0,0,0,24"/>

                    <!-- Sources -->
                    <TextBlock Text="Source Directories"
                               Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                               Foreground="{DynamicResource MaterialDesignBody}"
                               Margin="0,0,0,16"/>

                    <DockPanel Margin="0,0,0,8">
                        <Button DockPanel.Dock="Right"
                                x:Name="AddSourceButton"
                                Style="{StaticResource MaterialDesignRaisedButton}"
                                Content="Add Folder"
                                Margin="8,0,0,0">
                            <Button.ContentTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <materialDesign:PackIcon Kind="FolderPlus" 
                                                                 Width="18" 
                                                                 Height="18"
                                                                 Margin="0,0,8,0"/>
                                        <TextBlock Text="{Binding}"/>
                                    </StackPanel>
                                </DataTemplate>
                            </Button.ContentTemplate>
                        </Button>

                        <Button DockPanel.Dock="Right"
                                x:Name="RemoveSourceButton"
                                Style="{StaticResource MaterialDesignOutlinedButton}"
                                Content="Remove"
                                Margin="8,0">
                            <Button.ContentTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <materialDesign:PackIcon Kind="Minus" 
                                                                 Width="18" 
                                                                 Height="18"
                                                                 Margin="0,0,8,0"/>
                                        <TextBlock Text="{Binding}"/>
                                    </StackPanel>
                                </DataTemplate>
                            </Button.ContentTemplate>
                        </Button>

                        <TextBlock Foreground="{DynamicResource MaterialDesignBody}"/>
                    </DockPanel>

                    <ListBox x:Name="SourcesListBox"
                             Height="120"
                             Margin="0,0,0,24"
                             BorderBrush="{DynamicResource MaterialDesignDivider}"
                             BorderThickness="1"/>

                    <!-- Destination -->
                    <TextBlock Text="Backup Destination"
                               Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                               Foreground="{DynamicResource MaterialDesignBody}"
                               Margin="0,0,0,16"/>

                    <DockPanel Margin="0,0,0,24">
                        <Button DockPanel.Dock="Right"
                                x:Name="BrowseDestinationButton"
                                Style="{StaticResource MaterialDesignRaisedButton}"
                                Content="Browse..."
                                Margin="8,0,0,0"/>

                        <TextBox x:Name="DestinationTextBox"
                                 materialDesign:HintAssist.Hint="Destination Folder *"
                                 Foreground="{DynamicResource MaterialDesignBody}"
                                 Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
                    </DockPanel>

                    <!-- Schedule -->
                    <TextBlock Text="Schedule"
                               Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                               Foreground="{DynamicResource MaterialDesignBody}"
                               Margin="0,0,0,16"/>

                    <ComboBox x:Name="FrequencyComboBox"
                              materialDesign:HintAssist.Hint="Frequency"
                              Foreground="{DynamicResource MaterialDesignBody}"
                              Style="{StaticResource MaterialDesignOutlinedComboBox}"
                              Margin="0,0,0,16">
                        <ComboBoxItem Content="Manual" Tag="Manual"/>
                        <ComboBoxItem Content="Every X Minutes" Tag="EveryMinutes"/>
                        <ComboBoxItem Content="Every X Hours" Tag="EveryHours"/>
                        <ComboBoxItem Content="Daily" Tag="Daily"/>
                        <ComboBoxItem Content="Weekly" Tag="Weekly"/>
                        <ComboBoxItem Content="Monthly" Tag="Monthly"/>
                    </ComboBox>

                    <!-- Interval (Minutes/Hours) -->
                    <StackPanel x:Name="IntervalPanel" 
                                Visibility="Collapsed"
                                Orientation="Horizontal"
                                Margin="0,0,0,16">
                        <TextBlock Text="Every" 
                                   VerticalAlignment="Center"
                                   Foreground="{DynamicResource MaterialDesignBody}"
                                   Margin="0,0,8,0"/>
                        <TextBox x:Name="IntervalValueTextBox"
                                 Foreground="{DynamicResource MaterialDesignBody}"
                                 Width="80"
                                 Text="1"
                                 Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
                        <TextBlock x:Name="IntervalUnitTextBlock"
                                   Text="minutes"
                                   VerticalAlignment="Center"
                                   Foreground="{DynamicResource MaterialDesignBody}"
                                   Margin="8,0,0,0"/>
                    </StackPanel>

                    <!-- Daily Time -->
                    <materialDesign:TimePicker x:Name="DailyTimePicker"
                                               materialDesign:HintAssist.Hint="Time"
                                               Foreground="{DynamicResource MaterialDesignBody}"
                                               Visibility="Collapsed"
                                               Margin="0,0,0,16"/>

                    <!-- Weekly Day + Time -->
                    <StackPanel x:Name="WeeklyPanel"
                                Visibility="Collapsed"
                                Margin="0,0,0,16">
                        <ComboBox x:Name="WeeklyDayComboBox"
                                  materialDesign:HintAssist.Hint="Day of Week"
                                  Foreground="{DynamicResource MaterialDesignBody}"
                                  Style="{StaticResource MaterialDesignOutlinedComboBox}"
                                  Margin="0,0,0,8">
                            <ComboBoxItem Content="Sunday" Tag="Sunday"/>
                            <ComboBoxItem Content="Monday" Tag="Monday"/>
                            <ComboBoxItem Content="Tuesday" Tag="Tuesday"/>
                            <ComboBoxItem Content="Wednesday" Tag="Wednesday"/>
                            <ComboBoxItem Content="Thursday" Tag="Thursday"/>
                            <ComboBoxItem Content="Friday" Tag="Friday"/>
                            <ComboBoxItem Content="Saturday" Tag="Saturday"/>
                        </ComboBox>
                        <materialDesign:TimePicker x:Name="WeeklyTimePicker"
                                                   Foreground="{DynamicResource MaterialDesignBody}"
                                                   materialDesign:HintAssist.Hint="Time"/>
                    </StackPanel>

                    <!-- Monthly Day + Time -->
                    <StackPanel x:Name="MonthlyPanel"
                                Visibility="Collapsed"
                                Margin="0,0,0,16">
                        <TextBox x:Name="MonthlyDayTextBox"
                                 Foreground="{DynamicResource MaterialDesignBody}"
                                 materialDesign:HintAssist.Hint="Day of Month (1-31)"
                                 Style="{StaticResource MaterialDesignOutlinedTextBox}"
                                 Text="1"
                                 Margin="0,0,0,8"/>
                        <materialDesign:TimePicker x:Name="MonthlyTimePicker"
                                                   Foreground="{DynamicResource MaterialDesignBody}"
                                                   materialDesign:HintAssist.Hint="Time"/>
                    </StackPanel>

                    <!-- Options -->
                    <TextBlock Text="Backup Options"
                               Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                               Foreground="{DynamicResource MaterialDesignBody}"
                               Margin="0,8,0,16"/>

                    <CheckBox x:Name="EnableRetentionCheckBox"
                              Content="Enable Retention Policy"
                              Foreground="{DynamicResource MaterialDesignBody}"
                              IsChecked="True"
                              Margin="0,0,0,8"/>

                    <StackPanel Orientation="Horizontal" Margin="24,0,0,8">
                        <TextBlock Text="Keep last"
                                   VerticalAlignment="Center"
                                   Foreground="{DynamicResource MaterialDesignBody}"
                                   Margin="0,0,8,0"/>
                        <TextBox x:Name="MaxBackupCountTextBox"
                                 Foreground="{DynamicResource MaterialDesignBody}"
                                 Width="60"
                                 Text="10"
                                 Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
                        <TextBlock Text="backups or"
                                   VerticalAlignment="Center"
                                   Foreground="{DynamicResource MaterialDesignBody}"
                                   Margin="8,0"/>
                        <TextBox x:Name="RetentionDaysTextBox"
                                 Foreground="{DynamicResource MaterialDesignBody}"
                                 Width="60"
                                 Text="30"
                                 Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
                        <TextBlock Text="days"
                                   VerticalAlignment="Center"
                                   Foreground="{DynamicResource MaterialDesignBody}"
                                   Margin="8,0,0,0"/>
                    </StackPanel>

                    <CheckBox x:Name="IncludeHiddenFilesCheckBox"
                              Foreground="{DynamicResource MaterialDesignBody}"
                              Content="Include hidden files"
                              Margin="0,8,0,8"/>

                    <CheckBox x:Name="IncludeSystemFilesCheckBox"
                              Foreground="{DynamicResource MaterialDesignBody}"
                              Content="Include system files"
                              Margin="0,0,0,8"/>

                    <CheckBox x:Name="VerifyAfterBackupCheckBox"
                              Foreground="{DynamicResource MaterialDesignBody}"
                              Content="Verify backup after completion"
                              IsChecked="True"
                              Margin="0,0,0,8"/>

                    <CheckBox x:Name="PreserveAttributesCheckBox"
                              Foreground="{DynamicResource MaterialDesignBody}"
                              Content="Preserve file attributes and timestamps"
                              IsChecked="True"
                              Margin="0,0,0,24"/>
                </StackPanel>
            </ScrollViewer>

            <!-- Footer Buttons -->
            <Border Grid.Row="2"
                    Background="{DynamicResource MaterialDesignToolBarBackground}"
                    BorderBrush="{DynamicResource MaterialDesignDivider}"
                    BorderThickness="0,1,0,0"
                    Padding="24,16">
                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Right">
                    <Button x:Name="CancelButton"
                            Style="{StaticResource MaterialDesignOutlinedButton}"
                            Content="CANCEL"
                            Width="120"
                            Margin="0,0,16,0"/>

                    <Button x:Name="SaveButton"
                            Style="{StaticResource MaterialDesignRaisedButton}"
                            Content="SAVE"
                            Width="120"
                            Background="{DynamicResource PrimaryHueMidBrush}"
                            Foreground="{DynamicResource MaterialDesignBody}"/>
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</Window>
